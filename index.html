<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Fim by evrignaud</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Fim</h1>
      <h2 class="project-tagline">File Integrity Manager</h2>
      <a href="https://github.com/evrignaud/fim" class="btn">View on GitHub</a>
      <a href="https://github.com/evrignaud/fim/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/evrignaud/fim/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="fim" class="anchor" href="#fim" aria-hidden="true"><span class="octicon octicon-link"></span></a>Fim</h1>

<h2>
<a id="table-of-contents" class="anchor" href="#table-of-contents" aria-hidden="true"><span class="octicon octicon-link"></span></a>Table of contents</h2>

<ul>
<li><a href="#file-integrity-manager">File Integrity Manager</a></li>
<li><a href="#fim-workflow">Fim workflow</a></li>
<li><a href="#fim-usage">Fim usage</a></li>
<li><a href="#simple-example">Simple example</a></li>
<li><a href="#real-life-example">Real life example</a></li>
<li><a href="https://github.com/evrignaud/fim/blob/master/LICENSE.md">License</a></li>
</ul>

<h2>
<a id="file-integrity-manager" class="anchor" href="#file-integrity-manager" aria-hidden="true"><span class="octicon octicon-link"></span></a>File Integrity Manager</h2>

<p>Fim manage the integrity of a complete file tree.</p>

<p>Ensuring the integrity of a files can be done in several ways. The two classical ways are:</p>

<ul>
<li> manage your files using a VCS or a DVCS.</li>
<li> put all your file into an archive that will ensure the integrity of all the files.</li>
</ul>

<p>When you have gigabytes of videos or photos or other kind of binary files you cannot put all of them into a VCS or into an archive.</p>

<p>The solution provided by Fim is to manage an index of the files that contains for each file:</p>

<ul>
<li>filename</li>
<li>file length</li>
<li>modification date</li>
<li>hash of the first four kilobytes of the file content</li>
<li>hash of the first megabyte of the file content</li>
<li>hash of the full file content</li>
</ul>

<p>The hash algorithm that is used is SHA-512.</p>

<p>This index is called a <code>State</code> and acts like the Central Directory does for a Zip file.
All the data generated by Fim is stored into the <code>.fim</code> root directory.</p>

<p>You can use Fim to ensure the integrity of a big amount of data files.
This means having a clear status on files that have been removed, corrupted, modified, copied, renamed, duplicated.
You can also easily detect duplicates and remove them.</p>

<p>Fim does not keep track of the different contents of the files that are managed,
this is why we can call it an <strong>Unversioned Control System (UVCS)</strong>.
Fim keeps only each version of the different State that have been committed.
You cannot use them to retrieve the content of one file that you may have lost.</p>

<blockquote>
<p><strong>Fim does not replace a backup software</strong></p>
</blockquote>

<p><a href="#table-of-contents">[^ TOC]</a></p>

<h2>
<a id="fim-workflow" class="anchor" href="#fim-workflow" aria-hidden="true"><span class="octicon octicon-link"></span></a>Fim workflow</h2>

<p>First you need to initialize the Fim repository using the init command.
This will record the first State of your file tree.</p>

<pre><code>$ fim init
</code></pre>

<p>Then you can compare the differences between the recorded State and the current file tree using the diff command.
You can do a full diff that will compare the hash of all the files. It can be very slow as all the files content will be read.</p>

<pre><code>$ fim diff
</code></pre>

<p>You can compare quickly asking to hash only the first megabyte of the files. <strong>Using this option can produce an inaccurate result.</strong></p>

<pre><code>$ fim diff -m
</code></pre>

<p>You can compare quicker asking to hash only the first four kilobytes of the files. <strong>Using this option can produce an inaccurate result.</strong></p>

<pre><code>$ fim diff -k
</code></pre>

<p>Otherwise you can request to not hash file content using the fast mode (-f option). It will compare only the filenames and modification dates.
You will not be able to detect files that have been renamed or duplicated.</p>

<pre><code>$ fim diff -f
</code></pre>

<p>Each time you want to record the State of the current file tree you can use the commit command.
It's a time consuming operation that will compute all the hash of each files content.</p>

<pre><code>$ fim ci
</code></pre>

<p><a href="#table-of-contents">[^ TOC]</a></p>

<h2>
<a id="fim-usage" class="anchor" href="#fim-usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Fim usage</h2>

<pre><code>$ fim help

usage: fim &lt;command&gt; [-a &lt;arg&gt;] [-c &lt;arg&gt;] [-f] [-h] [-k] [-l] [-m] [-q] [-t &lt;arg&gt;] [-v] [-y]

File Integrity Checker

Available commands:
     init                      Initialize a Fim repository
     ci / commit               Commit the current directory State
     diff                      Compare the current directory State with the previous one
     rdates / reset-dates      Reset the file modification dates like it's stored in the last committed State
     fdup / find-duplicates    Find duplicated files
     rdup / remove-duplicates  Remove duplicated files from local directory based on a master Fim repository
     log                       Display States log
     help                      Prints the Fim help
     version                   Prints the Fim version

Available options:
     -a,--master-fim-repository &lt;arg&gt;   Fim repository directory that you want to use as master. Only for the remove
                                        duplicates command
     -c,--comment &lt;arg&gt;                 Sets that State comment during commit
     -f,--fast-mode                     Do not hash file content. Use only filenames and modification dates
     -h,--help                          Prints the Fim help
     -k,--hash-only-first-four-kilo     Hash only the first four kilo of the files
     -l,--use-last-state                Use the last committed State
     -m,--hash-only-first-mega          Hash only the first mega of the files
     -q,--quiet                         Do not display details
     -t,--thread-count &lt;arg&gt;            Number of thread to use to hash files content in parallel
     -v,--version                       Prints the Fim version
     -y,--always-yes                    Always yes to every questions
</code></pre>

<p><a href="#table-of-contents">[^ TOC]</a></p>

<h2>
<a id="simple-example" class="anchor" href="#simple-example" aria-hidden="true"><span class="octicon octicon-link"></span></a>Simple example</h2>

<p>Here is a step by step example of Fim usage.
For the purpose of this example we use small files.</p>

<h5>
<a id="create-a-set-of-files" class="anchor" href="#create-a-set-of-files" aria-hidden="true"><span class="octicon octicon-link"></span></a>Create a set of files</h5>

<div class="highlight highlight-shell"><pre><span class="pl-k">~</span>$ mkdir sample

<span class="pl-k">~</span>$ <span class="pl-c1">cd</span> sample/

<span class="pl-c"># Creates 10 files</span>
<span class="pl-k">~</span>/sample$ <span class="pl-k">for</span> <span class="pl-smi">i</span> <span class="pl-k">in</span> {01..10} <span class="pl-k">;</span> <span class="pl-k">do</span> <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span>New File <span class="pl-smi">$i</span><span class="pl-pds">"</span></span> <span class="pl-k">&gt;</span> file<span class="pl-smi">$i</span> <span class="pl-k">;</span> <span class="pl-k">done</span>

<span class="pl-k">~</span>/sample$ ls -la
total 48
drwxrwxr-x 2 4096 juil. 21 22:24 <span class="pl-c1">.</span>
drwxrwxr-x 7 4096 juil. 20 22:00 ..
-rw-rw-r-- 1   12 juil. 21 22:24 file01
-rw-rw-r-- 1   12 juil. 21 22:24 file02
-rw-rw-r-- 1   12 juil. 21 22:24 file03
-rw-rw-r-- 1   12 juil. 21 22:24 file04
-rw-rw-r-- 1   12 juil. 21 22:24 file05
-rw-rw-r-- 1   12 juil. 21 22:24 file06
-rw-rw-r-- 1   12 juil. 21 22:24 file07
-rw-rw-r-- 1   12 juil. 21 22:24 file08
-rw-rw-r-- 1   12 juil. 21 22:24 file09
-rw-rw-r-- 1   12 juil. 21 22:24 file10</pre></div>

<h5>
<a id="initialize-the-fim-repository" class="anchor" href="#initialize-the-fim-repository" aria-hidden="true"><span class="octicon octicon-link"></span></a>Initialize the Fim repository</h5>

<div class="highlight highlight-shell"><pre><span class="pl-k">~</span>/sample$ fim init
2015/07/21 22:25:02 - Info  - Scanning recursively <span class="pl-k">local</span> files, computing all <span class="pl-c1">hash</span>, using 2 thread
    (Hash progress legend <span class="pl-k">for</span> <span class="pl-smi">files</span> grouped 10 by 10: <span class="pl-c"># &gt; 200 MB, @ &gt; 100 MB, O &gt; 50 MB, o &gt; 20 MB, . otherwise)</span>
.2015/07/21 22:25:05 - Info  - Scanned 10 files (120 bytes), hashed 120 bytes bytes, during 00:00:03, using 2 thread

Added:            file01
Added:            file02
Added:            file03
Added:            file04
Added:            file05
Added:            file06
Added:            file07
Added:            file08
Added:            file09
Added:            file10

10 added</pre></div>

<h5>
<a id="a-new-fim-directory-have-been-created" class="anchor" href="#a-new-fim-directory-have-been-created" aria-hidden="true"><span class="octicon octicon-link"></span></a>A new <code>.fim</code> directory have been created</h5>

<div class="highlight highlight-shell"><pre><span class="pl-k">~</span>/sample$ ls -la
total 52
drwxrwxr-x 3 4096 juil. 21 22:25 <span class="pl-c1">.</span>
drwxrwxr-x 7 4096 juil. 20 22:00 ..
-rw-rw-r-- 1   12 juil. 21 22:24 file01
-rw-rw-r-- 1   12 juil. 21 22:24 file02
-rw-rw-r-- 1   12 juil. 21 22:24 file03
-rw-rw-r-- 1   12 juil. 21 22:24 file04
-rw-rw-r-- 1   12 juil. 21 22:24 file05
-rw-rw-r-- 1   12 juil. 21 22:24 file06
-rw-rw-r-- 1   12 juil. 21 22:24 file07
-rw-rw-r-- 1   12 juil. 21 22:24 file08
-rw-rw-r-- 1   12 juil. 21 22:24 file09
-rw-rw-r-- 1   12 juil. 21 22:24 file10
drwxrwxr-x 3 4096 juil. 21 22:25 .fim</pre></div>

<h5>
<a id="do-some-modifications-in-the-files" class="anchor" href="#do-some-modifications-in-the-files" aria-hidden="true"><span class="octicon octicon-link"></span></a>Do some modifications in the files</h5>

<div class="highlight highlight-shell"><pre><span class="pl-k">~</span>/sample$ mkdir dir1

<span class="pl-k">~</span>/sample$ mv file01 dir1

<span class="pl-c"># Change the file02 modification date</span>
<span class="pl-k">~</span>/sample$ touch file02

<span class="pl-k">~</span>/sample$ cp file03 file11

<span class="pl-c"># Add content to file04</span>
<span class="pl-k">~</span>/sample$ <span class="pl-c1">echo</span> foo <span class="pl-k">&gt;&gt;</span> file04

<span class="pl-k">~</span>/sample$ cp file05 file12

<span class="pl-c"># Add content to file05</span>
<span class="pl-k">~</span>/sample$ <span class="pl-c1">echo</span> bar <span class="pl-k">&gt;&gt;</span> file05

<span class="pl-k">~</span>/sample$ rm file06

<span class="pl-c"># Create the new file13</span>
<span class="pl-k">~</span>/sample$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span>New File 13<span class="pl-pds">"</span></span> <span class="pl-k">&gt;</span> file13

<span class="pl-k">~</span>/sample$ ls -la
total 60
drwxrwxr-x 4 4096 juil. 21 22:26 <span class="pl-c1">.</span>
drwxrwxr-x 7 4096 juil. 20 22:00 ..
drwxrwxr-x 2 4096 juil. 21 22:25 dir1
-rw-rw-r-- 1   12 juil. 21 22:25 file02
-rw-rw-r-- 1   12 juil. 21 22:24 file03
-rw-rw-r-- 1   16 juil. 21 22:26 file04
-rw-rw-r-- 1   16 juil. 21 22:26 file05
-rw-rw-r-- 1   12 juil. 21 22:24 file07
-rw-rw-r-- 1   12 juil. 21 22:24 file08
-rw-rw-r-- 1   12 juil. 21 22:24 file09
-rw-rw-r-- 1   12 juil. 21 22:24 file10
-rw-rw-r-- 1   12 juil. 21 22:25 file11
-rw-rw-r-- 1   12 juil. 21 22:26 file12
-rw-rw-r-- 1   12 juil. 21 22:26 file13
drwxrwxr-x 3 4096 juil. 21 22:25 .fim

<span class="pl-k">~</span>/sample$ ls -la dir1/
total 12
drwxrwxr-x 2 4096 juil. 21 22:25 <span class="pl-c1">.</span>
drwxrwxr-x 4 4096 juil. 21 22:26 ..
-rw-rw-r-- 1   12 juil. 21 22:24 file01</pre></div>

<h5>
<a id="fim-is-able-to-detect-all-the-modifications-that-have-been-done" class="anchor" href="#fim-is-able-to-detect-all-the-modifications-that-have-been-done" aria-hidden="true"><span class="octicon octicon-link"></span></a>Fim is able to detect all the modifications that have been done</h5>

<div class="highlight highlight-shell"><pre><span class="pl-k">~</span>/sample$ fim diff
2015/07/21 22:27:41 - Info  - Scanning recursively <span class="pl-k">local</span> files, computing all <span class="pl-c1">hash</span>, using 2 thread
    (Hash progress legend <span class="pl-k">for</span> <span class="pl-smi">files</span> grouped 10 by 10: <span class="pl-c"># &gt; 200 MB, @ &gt; 100 MB, O &gt; 50 MB, o &gt; 20 MB, . otherwise)</span>
<span class="pl-c1">.</span>
2015/07/21 22:27:44 - Info  - Scanned 12 files (152 bytes), hashed 152 bytes bytes, during 00:00:03, using 2 thread

Comparing with the last committed state from 2015/07/21 22:25:02
Comment: Initial State

Added:            file13
Copied:           file12    (was file05)
Duplicated:       file11 = file03
Date modified:    file02    2015/07/21 22:24:08 -<span class="pl-k">&gt;</span> 2015/07/21 22:25:55
Content modified: file04    2015/07/21 22:24:08 -<span class="pl-k">&gt;</span> 2015/07/21 22:26:07
Content modified: file05    2015/07/21 22:24:08 -<span class="pl-k">&gt;</span> 2015/07/21 22:26:15
Renamed:          file01 -<span class="pl-k">&gt;</span> dir1/file01
Deleted:          file06

1 added, 1 copied, 1 duplicated, 1 date modified, 2 content modified, 1 renamed, 1 deleted</pre></div>

<h5>
<a id="search-for-duplicated-files" class="anchor" href="#search-for-duplicated-files" aria-hidden="true"><span class="octicon octicon-link"></span></a>Search for duplicated files</h5>

<div class="highlight highlight-shell"><pre><span class="pl-k">~</span>/sample$ fim fdup
Searching <span class="pl-k">for</span> <span class="pl-smi">duplicated</span> files

2015/07/21 22:28:07 - Info  - Scanning recursively <span class="pl-k">local</span> files, computing all <span class="pl-c1">hash</span>, using 2 thread
    (Hash progress legend <span class="pl-k">for</span> <span class="pl-smi">files</span> grouped 10 by 10: <span class="pl-c"># &gt; 200 MB, @ &gt; 100 MB, O &gt; 50 MB, o &gt; 20 MB, . otherwise)</span>
<span class="pl-c1">.</span>
2015/07/21 22:28:10 - Info  - Scanned 12 files (152 bytes), hashed 152 bytes bytes, during 00:00:03, using 2 thread

1 duplicated files

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
- Duplicate <span class="pl-c1">set</span> <span class="pl-c">#1</span>
  file03 duplicated 1 <span class="pl-c1">times</span>
      file11
</pre></div>

<h5>
<a id="commit-the-modifications" class="anchor" href="#commit-the-modifications" aria-hidden="true"><span class="octicon octicon-link"></span></a>Commit the modifications</h5>

<div class="highlight highlight-shell"><pre><span class="pl-k">~</span>/sample$ fim ci -c <span class="pl-s"><span class="pl-pds">"</span>After modifications<span class="pl-pds">"</span></span>
2015/07/21 22:28:38 - Info  - Scanning recursively <span class="pl-k">local</span> files, computing all <span class="pl-c1">hash</span>, using 2 thread
    (Hash progress legend <span class="pl-k">for</span> <span class="pl-smi">files</span> grouped 10 by 10: <span class="pl-c"># &gt; 200 MB, @ &gt; 100 MB, O &gt; 50 MB, o &gt; 20 MB, . otherwise)</span>
<span class="pl-c1">.</span>
2015/07/21 22:28:41 - Info  - Scanned 12 files (152 bytes), hashed 152 bytes bytes, during 00:00:03, using 2 thread

Comparing with the last committed state from 2015/07/21 22:25:02
Comment: Initial State

Added:            file13
Copied:           file12    (was file05)
Duplicated:       file11 = file03
Date modified:    file02    2015/07/21 22:24:08 -<span class="pl-k">&gt;</span> 2015/07/21 22:25:55
Content modified: file04    2015/07/21 22:24:08 -<span class="pl-k">&gt;</span> 2015/07/21 22:26:07
Content modified: file05    2015/07/21 22:24:08 -<span class="pl-k">&gt;</span> 2015/07/21 22:26:15
Renamed:          file01 -<span class="pl-k">&gt;</span> dir1/file01
Deleted:          file06

1 added, 1 copied, 1 duplicated, 1 date modified, 2 content modified, 1 renamed, 1 deleted

Do you really want to commit (y/n/A)<span class="pl-k">?</span> y</pre></div>

<h5>
<a id="nothing-is-modified" class="anchor" href="#nothing-is-modified" aria-hidden="true"><span class="octicon octicon-link"></span></a>Nothing is modified</h5>

<div class="highlight highlight-shell"><pre><span class="pl-k">~</span>/sample$ fim diff
2015/07/21 22:30:32 - Info  - Scanning recursively <span class="pl-k">local</span> files, computing all <span class="pl-c1">hash</span>, using 2 thread
    (Hash progress legend <span class="pl-k">for</span> <span class="pl-smi">files</span> grouped 10 by 10: <span class="pl-c"># &gt; 200 MB, @ &gt; 100 MB, O &gt; 50 MB, o &gt; 20 MB, . otherwise)</span>
<span class="pl-c1">.</span>
2015/07/21 22:30:35 - Info  - Scanned 12 files (152 bytes), hashed 152 bytes bytes, during 00:00:03, using 2 thread

Comparing with the last committed state from 2015/07/21 22:28:38
Comment: After modifications

Nothing modified</pre></div>

<h5>
<a id="display-the-fim-log" class="anchor" href="#display-the-fim-log" aria-hidden="true"><span class="octicon octicon-link"></span></a>Display the Fim log</h5>

<div class="highlight highlight-shell"><pre><span class="pl-k">~</span>/sample$ fim log
State <span class="pl-c">#1: 2015/07/21 22:25:02</span>
    Comment: Initial State
    Contains 10 files

State <span class="pl-c">#2: 2015/07/21 22:28:38</span>
    Comment: After modifications
    Contains 12 files
</pre></div>

<p><a href="#table-of-contents">[^ TOC]</a></p>

<h2>
<a id="real-life-example" class="anchor" href="#real-life-example" aria-hidden="true"><span class="octicon octicon-link"></span></a>Real life example</h2>

<p>Here is the output of the initialization of a big Fim repository that contains 297 GB of photos and videos.
<strong>It takes 2 hours</strong> to hash all the files content.</p>

<div class="highlight highlight-shell"><pre><span class="pl-k">~</span>/Photos_Videos$ fim init
2015/07/20 23:07:28 - Info  - Scanning recursively <span class="pl-k">local</span> files, computing all <span class="pl-c1">hash</span>, using 2 thread
    (Hash progress legend <span class="pl-k">for</span> <span class="pl-smi">files</span> grouped 10 by 10: <span class="pl-c"># &gt; 200 MB, @ &gt; 100 MB, O &gt; 50 MB, o &gt; 20 MB, . otherwise)</span>
.o#...........................................o@o...............OO.oO.......O.......................
@....o.......oo......................o..................Oo..........................................
......................................#.............................................................
oO........O........................@@...............................................................
............................O...o........o.oo...o.o..o.................o........o...................
....o.o................................Oo..oo..o@...........................o.......................
.................................O...@..............................................................
....................................................................................................
...........o.......O@..............O@@.................O.o........@.........Oo........O@O..o......OO
..@...O#o..o......o................@.........OO.....................................................
...............o.........oo.o................................o...............o......................
.........................oooooooo.ooo@..........................oooo................O...............
...oo....OoOo..o....oO@@o@..O..........oO...o@oOO#@@@oo.@@o.o@O.....@@@@@@OO@@@@OO..@@#....OooO.....
.........................Oo#oOOoo.O#O.....oo.....o.......oo........@oOO.@o....o................O....
...@o#OoOO..@Oo.O.o........@o.............ooo@.o...............oO...................................
....O..O.....Oo#oooooooo..oo@oo.ooo.oooooooooO@ooo#Ooo@Ooo.o.o.##@@ooooo@OoOOOo...o.O.@Ooooooooooooo
oooooOooo.ooooooOooooOOoo.######O@####oo#####oo...oooOoo...ooooooooooooo....o.@#@#@OOoooOo#ooooOOoo@
ooo#@#####ooo..#.##o@o.@@o##oooooooO.oooooo@##o#@....#oooo@oo#######o...o.ooooooo#oo@#ooO@###o#oooo#
OooooooooooooooOoooooo....ooooooooo.#oooooo.oOOOooo....................o..ooo.........o.ooo.........
oo.o...........@o@o@oooO@##o.oooo#@##oo@ooo@##O##oOooooooooo###@##@............###OOoO#o###ooOoooo#o
oOoo@oo..o.oo...................o@#..o@ooo@@....................................................O...
............o............ooooo..o.....................ooo.o........................ooo.....o.oo.....
...............ooo....................oooooooooooooo.oo.oooooooooooo#oo#oooooooooooooooooooo........
..oooo......o......o......o..................o...#.#####ooooooooOoOooooooooOooooooOOOOooOOOoOOooo###
<span class="pl-c">#@OooooooO#####oOoooOOOOOOOoOOOoooooooOooooooooooooo###ooooooooooo#@OoOOOOOOOOoooooooooooooooOOoo#oO</span>
ooooooooooOOOoooooOooOOoOOOOooOOoOOOooOooOoooOoOOoooOoOoooOOOoOo##..................................
..........................@oo......ooo.oooo@oooooooooOooooooooO##OOOOOoOOOOOOOOOOOOOO@###OOOoOOOOOO#
@@OOOo...........................................................####@.ooo.o...o#ooooo@ooo..ooooo...
.ooo.......................Oo........................oo..@.......O@......O..........................
.....................................................@................@O............................
..................................................##@.....................................#o#oooOooo
.......#oO############################################################@##########o....ooooooooooo.oo
ooooo.oooo.o.oooooooooooo......ooooooooooooooooooooooo.oooooooooo.oooooooooooooooooooooooooooooooooo
o......oooooooooooooo....oooooooooooooooooooooooooooooooooooooo.oooooooooooooooooooooooooooooooooooo
oooooooo.o.ooo..ooo.ooooooooooo...oo.o....o..ooooo.ooo...o.ooooooooooooooooooo.ooooooooooooooooooooo
oooooooooo....oooo.ooooooooooooooooo....o....ooo...o.....oo............o.......o.oo.ooooooooooooo.oo
oooooooooooooooooooooooooooooooooo.oooooooooooooooo.ooooooooooooooooooooo.....oooooooooooooooooooooo
oooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo
oooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo
oooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo..oo
oooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo
oooooooooooooooooo#ooooooooooo..oo@...ooooo#o
2015/07/21 01:11:54 - Info  - Scanned 41453 files (297 GB), hashed 297 GB bytes, during 02:04:25, using 2 thread

... <span class="pl-c"># File list is skipped as it is too long</span>

41453 added</pre></div>

<p>I am able to check the differences very quickly using the <code>-k</code> option that will check only the first four kilobytes and <strong>it take 4 minutes</strong> :=).</p>

<div class="highlight highlight-shell"><pre><span class="pl-k">~</span>/Photos_Videos$ fim diff -k
2015/07/21 08:49:21 - Info  - Scanning recursively <span class="pl-k">local</span> files, hashing only first four kilo, using 2 thread
    (Hash progress legend <span class="pl-k">for</span> <span class="pl-smi">files</span> grouped 10 by 10: <span class="pl-c"># &gt; 200 MB, @ &gt; 100 MB, O &gt; 50 MB, o &gt; 20 MB, . otherwise)</span>
.o#...........................................o@o...............OO.oO.......O.......................
@....o.......oo......................o..................Oo..........................................
......................................#.............................................................
oO........O........................@@...............................................................
............................O...o........o.oo...o.o..o.................o........o...................
....o.o................................Oo..oo..o@...........................o.......................
.................................O...@..............................................................
....................................................................................................
...........o.......O@..............O@@.................O.o........@.........Oo........O@O..o......OO
..@...O#o..o......o................@.........OO.....................................................
...............o.........oo.o................................o...............o......................
.........................oooooooo.ooo@..........................oooo................O...............
...oo....OoOo..o....oO@@o@..O..........oO...o@oOO#@@@oo.@@o.o@O.....@@@@@@OO@@@@OO..@@#....OooO.....
.........................Oo#oOOoo.O#O.....oo.....o.......oo........@oOO.@o....o................O....
...@o#OoOO..@Oo.O.o........@o.............ooo@.o...............oO...................................
....O..O.....Oo#oooooooo..oo@oo.ooo.oooooooooO@ooo#Ooo@Ooo.o.o.##@@ooooo@OoOOOo...o.O.@Ooooooooooooo
oooooOooo.ooooooOooooOOoo.######O@####oo#####oo...oooOoo...ooooooooooooo....o.@#@#@OOoooOo#ooooOOoo@
ooo#@#####ooo..#.##o@o.@@o##oooooooO.oooooo@##o#@....#oooo@oo#######o...o.ooooooo#oo@#ooO@###o#oooo#
OooooooooooooooOoooooo....ooooooooo.#oooooo.oOOOooo....................o..ooo.........o.ooo.........
oo.o...........@o@o@oooO@##o.oooo#@##oo@ooo@##O##oOooooooooo###@##@............###OOoO#o###ooOoooo#o
oOoo@oo..o.oo...................o@#..o@ooo@@....................................................O...
............o............ooooo..o.....................ooo.o........................ooo.....o.oo.....
...............ooo....................oooooooooooooo.oo.oooooooooooo#oo#oooooooooooooooooooo........
..oooo......o......o......o..................o...#.#####ooooooooOoOooooooooOooooooOOOOooOOOoOOooo###
<span class="pl-c">#@OooooooO#####oOoooOOOOOOOoOOOoooooooOooooooooooooo###ooooooooooo#@OoOOOOOOOOoooooooooooooooOOoo#oO</span>
ooooooooooOOOoooooOooOOoOOOOooOOoOOOooOooOoooOoOOoooOoOoooOOOoOo##..................................
..........................@oo......ooo.oooo@oooooooooOooooooooO##OOOOOoOOOOOOOOOOOOOO@###OOOoOOOOOO#
@@OOOo...........................................................####@.ooo.o...o#ooooo@ooo..ooooo...
.ooo.......................Oo........................oo..@.......O@......O..........................
.....................................................@................@O............................
..................................................##@.....................................#o#oooOooo
.......#oO############################################################@##########o....ooooooooooo.oo
ooooo.oooo.o.oooooooooooo......ooooooooooooooooooooooo.oooooooooo.oooooooooooooooooooooooooooooooooo
o......oooooooooooooo....oooooooooooooooooooooooooooooooooooooo.oooooooooooooooooooooooooooooooooooo
oooooooo.o.ooo..ooo.ooooooooooo...oo.o....o..ooooo.ooo...o.ooooooooooooooooooo.ooooooooooooooooooooo
oooooooooo....oooo.ooooooooooooooooo....o....ooo...o.....oo............o.......o.oo.ooooooooooooo.oo
oooooooooooooooooooooooooooooooooo.oooooooooooooooo.ooooooooooooooooooooo.....oooooooooooooooooooooo
oooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo
oooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo
oooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo..oo
oooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo
oooooooooooooooooo#ooooooooooo..oo@...ooooo#o
2015/07/21 08:53:47 - Info  - Scanned 41453 files (297 GB), hashed 161 MB bytes, during 00:04:25, using 2 thread

Comparing with the last committed state from 2015/07/20 23:07:28
Comment: Initial State

Nothing modified</pre></div>

<p>This quick diff can be inaccurate.
To increase accuracy, you can use the <code>-m</code> option. This result is more accurate,
but it cannot be completely accurate as only the hash of the first megabyte of the files are computed.
This time in my case, <strong>it takes 20 minutes</strong> to check the differences.</p>

<div class="highlight highlight-shell"><pre><span class="pl-k">~</span>/Photos_Videos$ fim diff -m
2015/07/21 12:45:24 - Info  - Scanning recursively <span class="pl-k">local</span> files, hashing only first mega, using 2 thread
    (Hash progress legend <span class="pl-k">for</span> <span class="pl-smi">files</span> grouped 10 by 10: <span class="pl-c"># &gt; 200 MB, @ &gt; 100 MB, O &gt; 50 MB, o &gt; 20 MB, . otherwise)</span>
.o#...........................................o@o...............OO.oO.......O.......................
@....o.......oo......................o..................Oo..........................................
......................................#.............................................................
oO........O........................@@...............................................................
............................O...o........o.oo...o.o..o.................o........o...................
....o.o................................Oo..oo..o@...........................o.......................
.................................O...@..............................................................
....................................................................................................
...........o.......O@..............O@@.................O.o........@.........Oo........O@O..o......OO
..@...O#o..o......o................@.........OO.....................................................
...............o.........oo.o................................o...............o......................
.........................oooooooo.ooo@..........................oooo................O...............
...oo....OoOo..o....oO@@o@..O..........oO...o@oOO#@@@oo.@@o.o@O.....@@@@@@OO@@@@OO..@@#....OooO.....
.........................Oo#oOOoo.O#O.....oo.....o.......oo........@oOO.@o....o................O....
...@o#OoOO..@Oo.O.o........@o.............ooo@.o...............oO...................................
....O..O.....Oo#oooooooo..oo@oo.ooo.oooooooooO@ooo#Ooo@Ooo.o.o.##@@ooooo@OoOOOo...o.O.@Ooooooooooooo
oooooOooo.ooooooOooooOOoo.######O@####oo#####oo...oooOoo...ooooooooooooo....o.@#@#@OOoooOo#ooooOOoo@
ooo#@#####ooo..#.##o@o.@@o##oooooooO.oooooo@##o#@....#oooo@oo#######o...o.ooooooo#oo@#ooO@###o#oooo#
OooooooooooooooOoooooo....ooooooooo.#oooooo.oOOOooo....................o..ooo.........o.ooo.........
oo.o...........@o@o@oooO@##o.oooo#@##oo@ooo@##O##oOooooooooo###@##@............###OOoO#o###ooOoooo#o
oOoo@oo..o.oo...................o@#..o@ooo@@....................................................O...
............o............ooooo..o.....................ooo.o........................ooo.....o.oo.....
...............ooo....................oooooooooooooo.oo.oooooooooooo#oo#oooooooooooooooooooo........
..oooo......o......o......o..................o...#.#####ooooooooOoOooooooooOooooooOOOOooOOOoOOooo###
<span class="pl-c">#@OooooooO#####oOoooOOOOOOOoOOOoooooooOooooooooooooo###ooooooooooo#@OoOOOOOOOOoooooooooooooooOOoo#oO</span>
ooooooooooOOOoooooOooOOoOOOOooOOoOOOooOooOoooOoOOoooOoOoooOOOoOo##..................................
..........................@oo......ooo.oooo@oooooooooOooooooooO##OOOOOoOOOOOOOOOOOOOO@###OOOoOOOOOO#
@@OOOo...........................................................####@.ooo.o...o#ooooo@ooo..ooooo...
.ooo.......................Oo........................oo..@.......O@......O..........................
.....................................................@................@O............................
..................................................##@.....................................#o#oooOooo
.......#oO############################################################@##########o....ooooooooooo.oo
ooooo.oooo.o.oooooooooooo......ooooooooooooooooooooooo.oooooooooo.oooooooooooooooooooooooooooooooooo
o......oooooooooooooo....oooooooooooooooooooooooooooooooooooooo.oooooooooooooooooooooooooooooooooooo
oooooooo.o.ooo..ooo.ooooooooooo...oo.o....o..ooooo.ooo...o.ooooooooooooooooooo.ooooooooooooooooooooo
oooooooooo....oooo.ooooooooooooooooo....o....ooo...o.....oo............o.......o.oo.ooooooooooooo.oo
oooooooooooooooooooooooooooooooooo.oooooooooooooooo.ooooooooooooooooooooo.....oooooooooooooooooooooo
oooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo
oooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo
oooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo..oo
oooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo
oooooooooooooooooo#ooooooooooo..oo@...ooooo#o
2015/07/21 13:05:04 - Info  - Scanned 41453 files (297 GB), hashed 35 GB bytes, during 00:19:39, using 2 thread

Comparing with the last committed state from 2015/07/20 23:07:28
Comment: Initial State

Nothing modified</pre></div>

<p>If you want to be completely sure of the <code>diff</code> result you need to run a full hash of all the files content using the <code>fim diff</code> command without any option.
This time in my case, <strong>it takes 2 hours</strong> as for the <code>init</code> command.</p>

<p>There is also the fast mode using the <code>-f</code> option that do not hash file content. It helps to detect faster changes but only file names that have changed.
This time in my case, <strong>it takes 3 seconds</strong>.</p>

<p><a href="#table-of-contents">[^ TOC]</a></p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/evrignaud/fim">Fim</a> is maintained by <a href="https://github.com/evrignaud">evrignaud</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-65608268-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>

